{"version":3,"sources":["all.js"],"names":["$","document","ready","selectarea","querySelector","area_title","hotzonelist","getZoneList","addEventListener","e","textContent","target","value","getZoneData","nodeName","ajax","url","data","resource_id","dataType","success","zoneArr","result","records","forEach","element","push","Zone","zoneArrUnique","Set","str","innerHTML","queryZone","q","area_list","Picture1","Name","Opentime","Add","Tel","Ticketinfo"],"mappings":";;;;AAAAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC1B,QAAIC,aAAaF,SAASG,aAAT,CAAuB,aAAvB,CAAjB;AACA,QAAIC,aAAaJ,SAASG,aAAT,CAAuB,aAAvB,CAAjB;AACA,QAAIE,cAAcL,SAASG,aAAT,CAAuB,cAAvB,CAAlB;;AAEA;AACAG;;AAEA;AACAJ,eAAWK,gBAAX,CAA4B,QAA5B,EAAsC,UAAUC,CAAV,EAAa;AAC/C;AACAJ,mBAAWK,WAAX,GAAyBD,EAAEE,MAAF,CAASC,KAAlC;AACAC,oBAAYJ,EAAEE,MAAF,CAASC,KAArB;AACH,KAJD;;AAMA;AACAN,gBAAYE,gBAAZ,CAA6B,OAA7B,EAAsC,UAAUC,CAAV,EAAa;AAC/C,YAAIA,EAAEE,MAAF,CAASG,QAAT,KAAsB,OAA1B,EAAmC;AACnC;AACA;AACAT,mBAAWK,WAAX,GAAyBD,EAAEE,MAAF,CAASC,KAAlC;AACAC,oBAAYJ,EAAEE,MAAF,CAASC,KAArB;AACH,KAND;AAOH,CAvBD;;AA0BA,SAASL,WAAT,GAAuB;AACnBP,MAAEe,IAAF,CAAO;AACHC,aAAK,qDADF;AAEHC,cAAM;AACFC,yBAAa;AADX,SAFH;AAKHC,kBAAU,MALP;AAMHC,iBAAS,iBAAUH,IAAV,EAAgB;;AAErB,gBAAII,UAAU,EAAd;AACAJ,iBAAKK,MAAL,CAAYC,OAAZ,CAAoBC,OAApB,CAA4B,UAAUC,OAAV,EAAmB;AAC3CJ,wBAAQK,IAAR,CAAaD,QAAQE,IAArB;AACH,aAFD;;AAIA,gBAAIC,6CAAoB,IAAIC,GAAJ,CAAQR,OAAR,CAApB,EAAJ;AACA;;AAEA,gBAAIS,gFAAJ;;AAEAF,0BAAcJ,OAAd,CAAsB,UAAUC,OAAV,EAAmB;AACrCK,sBAAMA,2BAAwBL,OAAxB,aAAuCA,OAAvC,kBAAN;AACH,aAFD;;AAIAtB,uBAAW4B,SAAX,GAAuBD,GAAvB;AAEH;AAxBE,KAAP;AA0BH;;AAGD,SAASjB,WAAT,CAAqBmB,SAArB,EAAgC;AAC5BhC,MAAEe,IAAF,CAAO;AACHC,aAAK,qDADF;AAEHC,cAAM;AACFC,yBAAa,sCADX,EACmD;AACrDe,eAAGD,SAFD,CAEW;AAFX,SAFH;AAMHb,kBAAU,MANP;AAOHC,iBAAS,iBAAUH,IAAV,EAAgB;AACrB;;AAEA,gBAAIiB,YAAYjC,SAASG,aAAT,CAAuB,YAAvB,CAAhB;AACA,gBAAI0B,MAAM,EAAV;AACAb,iBAAKK,MAAL,CAAYC,OAAZ,CAAoBC,OAApB,CAA4B,UAAUC,OAAV,EAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAK,sBAAMA,4KAG0DL,QAAQU,QAHlE,8CAIYV,QAAQW,IAJpB,8CAKWX,QAAQE,IALnB,iUAWmBF,QAAQY,QAX3B,0NAemBZ,QAAQa,GAf3B,4NAmBmBb,QAAQc,GAnB3B,iOAuBmBd,QAAQe,UAvB3B,yLAAN;AA8BH,aAxCD;;AA0CAN,sBAAUH,SAAV,GAAsBD,GAAtB;;AAEA;AACH;AAzDE,KAAP;AA2DH","file":"all.js","sourcesContent":["$(document).ready(function () {\n    let selectarea = document.querySelector('#selectarea');\n    let area_title = document.querySelector('#area_title');\n    let hotzonelist = document.querySelector('#hotzonelist');\n\n    //取得行政區清單\n    getZoneList();\n\n    //監聽 行政區 是否變更\n    selectarea.addEventListener(\"change\", function (e) {\n        // console.log(e.target.value);\n        area_title.textContent = e.target.value;\n        getZoneData(e.target.value);\n    })\n\n    //監聽 熱門行政區\n    hotzonelist.addEventListener(\"click\", function (e) {\n        if (e.target.nodeName !== 'INPUT') return;\n        // console.log(e.target.nodeName);\n        // console.log(e.target.value);\n        area_title.textContent = e.target.value;\n        getZoneData(e.target.value);\n    })\n});\n\n\nfunction getZoneList() {\n    $.ajax({\n        url: 'https://data.kcg.gov.tw/api/action/datastore_search',\n        data: {\n            resource_id: '92290ee5-6e61-456f-80c0-249eae2fcc97'\n        },\n        dataType: 'json',\n        success: function (data) {\n\n            let zoneArr = [];\n            data.result.records.forEach(function (element) {\n                zoneArr.push(element.Zone);\n            })\n\n            let zoneArrUnique = [...new Set(zoneArr)];\n            // console.log(zoneArrUnique);\n\n            let str = `<option value=\"null\">-- 請選擇行政區 --</option>`;\n\n            zoneArrUnique.forEach(function (element) {\n                str = str + `<option value=\"${element}\">-- ${element} --</option>`;\n            })\n\n            selectarea.innerHTML = str;\n\n        }\n    });\n}\n\n\nfunction getZoneData(queryZone) {\n    $.ajax({\n        url: 'https://data.kcg.gov.tw/api/action/datastore_search',\n        data: {\n            resource_id: '92290ee5-6e61-456f-80c0-249eae2fcc97', // the resource id\n            q: queryZone // query for 'jones'\n        },\n        dataType: 'json',\n        success: function (data) {\n            // console.log(data);\n\n            let area_list = document.querySelector('.area_list');\n            let str = \"\";\n            data.result.records.forEach(function (element) {\n                // console.log(element.Picture1);\n                // console.log(element.Name);\n                // console.log(element.Zone);\n                // console.log(element.Opentime);\n                // console.log(element.Add);\n                // console.log(element.Tel);\n                // console.log(element.Ticketinfo);\n                // console.log(element.Website);\n\n                str = str + `\n                <li class=\"area_item\">\n                    <div class=\"card\">\n                        <div class=\"card_header\" style=\"background-image: url(${element.Picture1});\">\n                            <h3>${element.Name}</h3>\n                            <p>${element.Zone}</p>\n                        </div>\n                        <div class=\"card_body\">\n                            <ul class=\"contentlist\">\n                                <li class=\"opentime\">\n                                    <img src=\"./img/icons_clock.png\" alt=\"\">\n                                    <p>${element.Opentime}</p>\n                                </li>\n                                <li class=\"add\">\n                                    <img src=\"./img/icons_pin.png\" alt=\"\">\n                                    <p>${element.Add}</p>\n                                </li>\n                                <li class=\"tel\">\n                                    <img src=\"./img/icons_phone.png\" alt=\"\">\n                                    <p>${element.Tel}</p>\n                                </li>\n                                <li class=\"ticketinfo\">\n                                    <img src=\"./img/icons_tag.png\" alt=\"\">\n                                    <p>${element.Ticketinfo}</p>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </li>\n                `\n            });\n\n            area_list.innerHTML = str;\n\n            // console.log('Total results found: ' + data.result.total)\n        }\n    });\n}"]}